# ë¦¬ê·¸ ì˜¤ë¸Œ ë ˆì „ë“œ. ì ì„ ì•Œê³  ë‚˜ë¥¼ ì•Œì. 

<img width="946" alt="ë¦¬ê·¸ ì˜¤ë¸Œ ë ˆì „ë“œ ì •ë³´ì•±" src="https://github.com/user-attachments/assets/c29d0a51-8b78-4372-9616-1bd95ecb55e6" />

## ğŸ“– ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ì†Œê°œ](#í”„ë¡œì íŠ¸-ì†Œê°œ)
2. [ì£¼ìš”ê¸°ëŠ¥](#ì£¼ìš”ê¸°ëŠ¥)
3. [ì ìš© ê¸°ìˆ  ë° ê¸°ìˆ ì  ì˜ì‚¬ê²°ì •](#ì ìš©-ê¸°ìˆ -ë°-ê¸°ìˆ ì -ì˜ì‚¬ê²°ì •)
4. [ê¸°ìˆ ìŠ¤íƒ](#ê¸°ìˆ ìŠ¤íƒ)
5. [Trouble Shooting](#trouble-shooting)

## ğŸ‘¨â€ğŸ« í”„ë¡œì íŠ¸ ì†Œê°œ

> ### "ì ì„ ì•Œê³  ë‚˜ë¥¼ ì•Œì. ì±”í”¼ì–¸íŒì„ ì•Œì•„ë³´ì!"
Next.js ê¸°ìˆ  ì—°ìŠµì„ ê²¸í•˜ì—¬ ë§Œë“ ,  ë¼ì´ì—‡ APIë¥¼ í†µí•´ ì±”í”¼ì–¸, ì•„ì´í…œ, ë¡œí…Œì´ì…˜ ì •ë³´ë¥¼ í‘œì‹œí•˜ëŠ” ì›¹ì‚¬ì´íŠ¸ì…ë‹ˆë‹¤. 

## ì£¼ìš”ê¸°ëŠ¥

### ğŸ¦¸ì±”í”¼ì–¸ ì •ë³´ í™•ì¸. 

- ë¦¬ê·¸ì— ì¡´ì¬í•˜ëŠ” ì±”í”¼ì–¸ë“¤ì˜ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

- ê²€ìƒ‰ ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬, ì›í•˜ëŠ” ì±”í”¼ì–¸ë§Œ í•„í„°ë§í•˜ì—¬ ë³¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. 

- ì±”í”¼ì–¸ ìƒì„¸ í™”ë©´ì—ì„  ì±”í”¼ì–¸ì˜ ìŠ¤í† ë¦¬, í•´ë‹¹ ì±”í”¼ì–¸ì´ ìš°êµ°/ì êµ°ì¼ ë•Œì˜ íŒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

- ISRì„ í™œìš©í•˜ì—¬, ì‚¬ìš©ìì˜ ì…ë ¥ì— ë”°ë¼ í•˜ë£¨ë§ˆë‹¤ ìƒˆë¡­ê²Œ ì±”í”¼ì–¸ ë°ì´í„°ë¥¼ ë°›ì•„ì„œ ë Œë”ë§í•©ë‹ˆë‹¤. 

<details>
<summary>ë¯¸ë¦¬ë³´ê¸°</summary>
<div markdown="1">

- ì±”í”¼ì–¸ í™”ë©´
<img width="942" alt="ì±”í”¼ì–¸ í™”ë©´" src="https://github.com/user-attachments/assets/81f94e79-12a0-45be-b492-b0b91f5ffb9c" />

- ê²€ìƒ‰ ê¸°ëŠ¥
<img width="958" alt="ì±”í”¼ì–¸ ê²€ìƒ‰" src="https://github.com/user-attachments/assets/ebbcc8e1-3b27-4eeb-94ed-fb73dc933f56" />

- ì±”í”¼ì–¸ ìƒì„¸ í™”ë©´
<img width="956" alt="ì±”í”¼ì–¸ ìƒì„¸ í™”ë©´" src="https://github.com/user-attachments/assets/16522dfe-4418-4592-a57a-05581bfd7c69" />
<br>
</div>
</details>

### ğŸ—¡ï¸ ì•„ì´í…œ ì •ë³´

- ë¦¬ê·¸ì˜ ì•„ì´í…œ ì •ë³´ë“¤ì„ í™•ì¸í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ìƒì„¸ í™”ë©´ì—ì„  ì•„ì´í…œë“¤ì˜ ì„±ëŠ¥ê³¼ ì„¤ëª…ì„ ì½ì–´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

- SSGë¡œ ìƒì„±ë˜ì–´, ë¹ ë¥´ê²Œ ì•„ì´í…œ ì •ë³´ë¥¼ ë°›ì•„ë³¼ ìˆ˜ê°€ ìˆìŠµë‹ˆë‹¤. 

<details>
<summary>ë¯¸ë¦¬ë³´ê¸°</summary>
<div markdown="1">

- ì•„ì´í…œ 
<img width="948" alt="ì•„ì´í…œ" src="https://github.com/user-attachments/assets/a202d691-9b97-4205-a4f3-5b5d0fca9e95" />

- ì•„ì´í…œ ìƒì„¸ í™”ë©´
<img width="960" alt="ì•„ì´í…œ ìƒì„¸í™”ë©´" src="https://github.com/user-attachments/assets/8d829e13-9a6f-4ca8-81b5-448636e7c38c" />

<br>
</div>
</details>

### ğŸ†“ë¡œí…Œì´ì…˜ í™•ì¸

- ë¦¬ê·¸ì—ì„œ í”Œë ˆì´í•  ìˆ˜ ìˆëŠ” ë¬´ë£Œ ì±”í”¼ì–¸ë“¤ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. 

- ì±”í”¼ì–¸ë“¤ì˜ ì¹´ë“œë¥¼ í´ë¦­í•˜ë©´, í•´ë‹¹ ì±”í”¼ì–¸ì˜ ìƒì„¸ ì •ë³´ë¡œ ì´ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

- CSRì„ í†µí•´ êµ¬í˜„ë˜ì—ˆìœ¼ë©°, tanstack queryê°€ ì‚¬ìš©ë˜ì—ˆìŠµë‹ˆë‹¤. 

<details>
<summary>ë¯¸ë¦¬ë³´ê¸°</summary>
<div markdown="1">

<img width="945" alt="ë¡œí…Œì´ì…˜" src="https://github.com/user-attachments/assets/07009cf1-a432-412b-8d88-6ec9008a0a1a" />


<br>
</div>
</details>

## ì ìš© ê¸°ìˆ 

### Next.js

### Tanstack query

### Tailwind css

## â²ï¸ ê°œë°œê¸°ê°„

- 2024.11.29(ê¸ˆ) ~ 2024.12.4(ìˆ˜)

## ğŸ“šï¸ ê¸°ìˆ ìŠ¤íƒ

### âœ”ï¸ Language

![JavaScript](https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=JavaScript&logoColor=black)
![HTML](https://img.shields.io/badge/HTML5-E34F26?style=for-the-badge&logo=html5&logoColor=white)
![CSS](https://img.shields.io/badge/CSS3-1572B6?style=for-the-badge&logo=css3&logoColor=white)

### âœ”ï¸ Version Control

![Git](https://img.shields.io/badge/GIT-E44C30?style=for-the-badge&logo=git&logoColor=white)
![GitHub](https://img.shields.io/badge/GitHub-100000?style=for-the-badge&logo=github&logoColor=white)

### âœ”ï¸ IDE

![VSCode](https://img.shields.io/badge/Visual_Studio_Code-0078D4?style=for-the-badge&logo=visual%20studio%20code&logoColor=white)


### âœ”ï¸ Deploy

![Vercel](https://img.shields.io/badge/Vercel-000000?style=for-the-badge&logo=vercel&logoColor=white)

## Trouble Shooting

## ## **1. TypeError ë°œìƒ**

### **ë¬¸ì œ ìƒí™©**


ì½”ë“œë¥¼ ì‹¤í–‰í•˜ì ë‹¤ìŒê³¼ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë‹¤.

TypeError: (0 , marked__WEBPACK_IMPORTED_MODULE_7__.default) is not a function

í˜ì´ì§€ê°€ ì œëŒ€ë¡œ ë¡œë“œë˜ì§€ ì•Šì•˜ê³ , React Queryê°€ ì˜ˆìƒëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•Šì•˜ë‹¤.

### **ë¬¸ì œ ì›ì¸**

ì—ëŸ¬ë¥¼ ë¶„ì„í•œ ê²°ê³¼, useQueryì™€ ê´€ë ¨ëœ ë¬¸ì œëŠ”  **"use client"**  ì§€ì‹œì–´ê°€ ëˆ„ë½ë˜ì–´ ë°œìƒí–ˆë‹¤.  

Next.jsì—ì„œ useQueryëŠ” í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì—ì„œë§Œ ì‘ë™í•œë‹¤.

ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œ useQueryë¥¼ ì‚¬ìš©í•˜ë ¤ê³  í•˜ë©´ ìœ„ì™€ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.

### **í•´ê²° ë°©ë²•**

#### **"use client" ì§€ì‹œì–´ ì¶”ê°€**

useQueryë¥¼ ì‚¬ìš©í•˜ëŠ” íŒŒì¼ì˜ ìµœìƒë‹¨ì—  **"use client"**  ì§€ì‹œì–´ë¥¼ ì¶”ê°€í•˜ì—¬, í•´ë‹¹ íŒŒì¼ì„ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¡œ ì„¤ì •í–ˆë‹¤.

#### ìˆ˜ì •ëœ  **Home ì»´í¬ë„ŒíŠ¸**
```
"use client";

  

import { useQuery } from  "@tanstack/react-query";

import { fetchData } from  "./api/api";

  

export  default  function  Home() {

const { data: jsondata } =  useQuery({

queryKey: ["datas"],

queryFn:  fetchData,

});

  

return (

<div  className="flex flex-col items-center justify-center">

{jsondata?.map((data) => {

return (

<div  key={data.id}>

<p>{data.title}</p>

<p>{data.author}</p>

</div>

);

})}

</div>

);

}
```

## **êµí›ˆê³¼ ë°°ìš´ ì **

1.  **í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì˜ êµ¬ë¶„**
    -   Next.jsëŠ” ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ëª…í™•íˆ êµ¬ë¶„í•œë‹¤.
    -   React Queryì™€ ê°™ì€ í´ë¼ì´ì–¸íŠ¸ ì¸¡ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ë°˜ë“œì‹œ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
2.  **"use client" ì§€ì‹œì–´ì˜ ì¤‘ìš”ì„±**
    -   "use client" ì§€ì‹œì–´ë¥¼ ëˆ„ë½í•˜ë©´ ì„œë²„ ì»´í¬ë„ŒíŠ¸ë¡œ ì¸ì‹ë˜ì–´ í´ë¼ì´ì–¸íŠ¸ ì¸¡ í›…ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤.
3.  **ë ˆì´ì•„ì›ƒì—ì„œ Provider ì„¤ì •**
    -   QueryClientProviderë¥¼ layout.tsxì—ì„œ ì„¤ì •í•˜ë©´ í”„ë¡œì íŠ¸ ì „ë°˜ì—ì„œ React Queryë¥¼ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
4.  **ë””ë²„ê¹… ê³¼ì •**
    -   TypeError ë°œìƒ ì‹œ, ì—ëŸ¬ ë©”ì‹œì§€ì™€ í•¨ê»˜ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ê°€ ì„œë²„/í´ë¼ì´ì–¸íŠ¸ ì–´ë””ì—ì„œ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸í•´ì•¼ í•œë‹¤.

## **2. ê°ì²´ ë°ì´í„°ë¥¼ mapìœ¼ë¡œ ìˆœíšŒí•˜ê¸°**

### **ë¬¸ì œ ìƒí™©**

ë¼ì´ì—‡ APIì—ì„œ ê°€ì ¸ì˜¨ ì±”í”¼ì–¸ ë°ì´í„°ëŠ” ë‹¤ìŒê³¼ ê°™ì€  **ê°ì²´ í˜•íƒœ**ë¡œ ì œê³µëœë‹¤.

{ ì±”í”¼ì–¸1ì˜ë¬¸ì´ë¦„: { ì±”í”¼ì–¸1  ì •ë³´ }, ì±”í”¼ì–¸2ì˜ë¬¸ì´ë¦„: { ì±”í”¼ì–¸2  ì •ë³´ }, ... }

ê°ì²´ëŠ” map ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ë°ì´í„°ë¥¼ ìˆœíšŒí•˜ë ¤ë©´  **ë°°ì—´ë¡œ ë³€í™˜**í•´ì•¼ í–ˆë‹¤.

  
ì²˜ìŒì—ëŠ” Object.valuesë¥¼ ì‚¬ìš©í•´ ê°’ë§Œ ë°°ì—´ë¡œ ë³€í™˜í–ˆì§€ë§Œ, ì±”í”¼ì–¸ ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ê¸° ìœ„í•´ ì˜ë¬¸ ì´ë¦„(í‚¤ ê°’)ë„ í•„ìš”í–ˆë‹¤.

### **í•´ê²° ë°©ë²•: Object.entries ì‚¬ìš©**

Object.entriesë¥¼ ì‚¬ìš©í•˜ë©´ ê°ì²´ì˜  **í‚¤-ê°’ ìŒì„ ë°°ì—´ í˜•íƒœë¡œ ë³€í™˜**í•  ìˆ˜ ìˆë‹¤.  
ì´ë¥¼ í™œìš©í•´ ì±”í”¼ì–¸ ë°ì´í„°ë¥¼ ìˆœíšŒí•˜ë©° ì´ë¯¸ì§€ì™€ ì´ë¦„ì„ ë Œë”ë§í–ˆë‹¤.

```
const  Champions  =  async () => {

const  fetchChampionData  =  async ():  Promise<ChampionData> => {

const  res  =  await  fetch(

"[https://ddragon.leagueoflegends.com/cdn/14.24.1/data/ko_KR/champion.json](https://ddragon.leagueoflegends.com/cdn/14.24.1/data/ko_KR/champion.json)"

);

const { data } =  await  res.json();

return  Object.entries(data);

};

  

const  data  =  await  fetchChampionData();

  

return (

<div  className="flex min-h-screen flex-col items-center p-24">

<div>

{data.map(([key, value], i) => {

return (

<div  key={i}>

<Image

src={`[https://ddragon.leagueoflegends.com/cdn/14.24.1/img/champion/](https://ddragon.leagueoflegends.com/cdn/14.24.1/img/champion/)${key}.png`}

width={50}

height={50}

alt="ì±”í”¼ì–¸ ì´ë¯¸ì§€"

></Image>

<p>{value.name}</p>

</div>

);

})}

</div>

</div>

);

};

export  default  Champions;
```

### **ê²°ê³¼**

-   **ì±”í”¼ì–¸ ì´ë¯¸ì§€**: keyë¥¼ ì‚¬ìš©í•´ ì´ë¯¸ì§€ URL ìƒì„±.
-   **ì±”í”¼ì–¸ ì´ë¦„**: value.nameìœ¼ë¡œ ì±”í”¼ì–¸ ì´ë¦„ ì¶œë ¥.

## **3. ì´ë¯¸ì§€ê°€ ë¶ˆëŸ¬ì™€ì§€ì§€ ì•ŠëŠ” ë¬¸ì œ**

### **ë¬¸ì œ ìƒí™©**

Image íƒœê·¸ë¥¼ ì‚¬ìš©í•´ ì™¸ë¶€ URLì—ì„œ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¤ë ¤ í–ˆì§€ë§Œ, ì´ë¯¸ì§€ê°€ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•Šì•˜ë‹¤.

### **í•´ê²° ë°©ë²•: next.config.js ì„¤ì •**

Next.jsì—ì„œëŠ” ë³´ì•ˆê³¼ ìµœì í™”ë¥¼ ìœ„í•´ ì™¸ë¶€ URLì˜ ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ë ¤ë©´  **next.config.js**  íŒŒì¼ì—ì„œ ì„¤ì •ì´ í•„ìš”í•˜ë‹¤.

```
/** @type  {import('next').NextConfig} */

const  nextConfig  = {

images: {

remotePatterns: [

{

protocol:  "https",

hostname:  "ddragon.leagueoflegends.com",

port:  "",

pathname:  "/cdn/**",

},

],

},

};

  

export  default  nextConfig;
```

### **ì„¤ëª…**

-   **protocol**: ì™¸ë¶€ URLì˜ í”„ë¡œí† ì½œ (https).
-   **hostname**: ì™¸ë¶€ ì´ë¯¸ì§€ URLì˜ ë„ë©”ì¸ (ddragon.leagueoflegends.com).
-   **pathname**: ì´ë¯¸ì§€ ê²½ë¡œ íŒ¨í„´ (/cdn/**).

### **ê²°ê³¼**

ìœ„ ì„¤ì •ì„ í†µí•´  [https://ddragon.leagueoflegends.com/cdn/14.24.1/img/champion/$](https://ddragon.leagueoflegends.com/cdn/14.24.1/img/champion/$){key}.png ê°™ì€ URLì—ì„œ ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆì—ˆë‹¤.

## **4. íƒ€ì… ì§€ì •**

### **ë¬¸ì œ ìƒí™©**

fetchChampionData í•¨ìˆ˜ëŠ” Object.entriesë¥¼ ì‚¬ìš©í•´ ë°ì´í„°ë¥¼ ë³€í™˜í•œë‹¤.  
ë”°ë¼ì„œ ë°˜í™˜ ê°’ì´ ë°°ì—´ í˜•íƒœê°€ ë˜ë¯€ë¡œ  **ì ì ˆí•œ íƒ€ì… ì§€ì •**ì´ í•„ìš”í–ˆë‹¤.

### **í•´ê²° ë°©ë²•: íƒ€ì… ì„ ì–¸**

ì±”í”¼ì–¸ ë°ì´í„°ì˜ íƒ€ì…ì„ ì„ ì–¸í•˜ì—¬, fetchChampionData í•¨ìˆ˜ì— ì ìš©í–ˆë‹¤.
```
export  type  ChampionData  = [string, Champion][] // [ì˜ë¬¸ ì´ë¦„, ì±”í”¼ì–¸ ì •ë³´]

  

export  type  Champion  = {

key:  string;

name:  string;

title:  string;

blurb:  string;

};
```
```
const  fetchChampionData  =  async ():  Promise<ChampionData> => {

const  res  =  await  fetch(

"[https://ddragon.leagueoflegends.com/cdn/14.24.1/data/ko_KR/champion.json](https://ddragon.leagueoflegends.com/cdn/14.24.1/data/ko_KR/champion.json)"

);

const { data } =  await  res.json();

return  Object.entries(data); // [stringm Champion[]] íƒ€ì….

};
```

## **5. íƒ€ì… ì—ëŸ¬ì™€ throw Errorì˜ ì˜¤í•´**

### **ë¬¸ì œ ìƒí™©**

fetchChampionData í•¨ìˆ˜ì—ì„œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ë©°, ì„±ê³µ ì‹œ ë°ì´í„° ë°°ì—´ì„, ì‹¤íŒ¨ ì‹œ Error ê°ì²´ë¥¼ ë°˜í™˜í•˜ë„ë¡ ì„¤ê³„í–ˆë‹¤.  
ê·¸ëŸ¬ë‚˜ í•¨ìˆ˜ ë°˜í™˜ íƒ€ì…ì„ Promise<ChampionData | Error>ë¡œ ì§€ì •í–ˆìŒì—ë„, ì•„ë˜ì™€ ê°™ì€ íƒ€ì… ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤.

```
import { ChampionData } from  "@/types/Champion";

  

const  fetchChampionData  =  async ():  Promise<ChampionData  |  Error> => {

try {

const  res  =  await  fetch(

"[https://ddragon.leagueoflegends.com/cdn/14.24.1/data/ko_KR/champion.json](https://ddragon.leagueoflegends.com/cdn/14.24.1/data/ko_KR/champion.json)"

);

const { data } =  await  res.json();

return  Object.entries(data);

} catch (error) {

console.log(error);

throw  Error("Failed to fetch champion data");  // ì—¬ê¸°ì„œ ë¬¸ì œê°€ ë°œìƒ

}

};

  

íƒ€ì…  ì—ëŸ¬ê°€  ì™œ  ëœ¨ì§€?
```

### **ë¬¸ì œ ì›ì¸**

throw ErrorëŠ” ë°˜í™˜ê°’ì„ ìƒì„±í•˜ì§€ ì•ŠëŠ”ë‹¤.  
ì˜¤íˆë ¤ ì˜ˆì™¸ë¥¼ ë˜ì§€ê¸° ë•Œë¬¸ì—, í•¨ìˆ˜ ë°˜í™˜ê°’ì„ íƒ€ì…ìœ¼ë¡œ ì¶”ë¡ í•  ìˆ˜ ì—†ê²Œ ë§Œë“ ë‹¤.  
ë”°ë¼ì„œ Promise<ChampionData | Error>ë¼ëŠ” íƒ€ì… ì§€ì •ì€ ì˜ë¯¸ê°€ ì—†ì–´ì§„ë‹¤.

```
const  fetchChampionData  =  async ():  Promise<ChampionData> => {

try {

const  res  =  await  fetch(

"[https://ddragon.leagueoflegends.com/cdn/14.24.1/data/ko_KR/champion.json](https://ddragon.leagueoflegends.com/cdn/14.24.1/data/ko_KR/champion.json)"

);

const { data } =  await  res.json();

return  Object.entries(data);

} catch (error) {

console.log(error);

throw  new  Error("Failed to fetch champion data");

}

};
```

### **í•´ê²° ë°©ë²•**

throw í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ë°˜í™˜ê°’ ëŒ€ì‹  ì˜ˆì™¸ê°€ ë°œìƒí•˜ë¯€ë¡œ, í•¨ìˆ˜ì˜ ë°˜í™˜ íƒ€ì…ì„ ëª…í™•íˆ Promise<ChampionData>ë¡œ ì„¤ì •í•˜ê³  ì—ëŸ¬ ì²˜ë¦¬ë¥¼ ë”°ë¡œ êµ¬í˜„í•´ì•¼ í•œë‹¤.

## **6. ë™ì  ë¼ìš°íŠ¸ì—ì„œ Metadata ìˆ˜ì •í•˜ê¸°**

### **ë¬¸ì œ ìƒí™©**

Next.jsì—ì„œ í˜ì´ì§€ì˜ MetadataëŠ” layout.tsx íŒŒì¼ë¿ë§Œ ì•„ë‹ˆë¼  **ê°œë³„ í˜ì´ì§€**ì—ì„œë„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

  
ì´ë•Œ, ì •ì ì¸ MetadataëŠ” ê°„ë‹¨íˆ ì„ ì–¸í•  ìˆ˜ ìˆì§€ë§Œ,  **ë™ì  ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ Metadataë¥¼ ì„¤ì •í•´ì•¼ í•  ê²½ìš°**  ì¶”ê°€ì ì¸ ì‘ì—…ì´ í•„ìš”í•˜ë‹¤.

### **ì •ì  Metadata ì„¤ì •**

ì•„ë˜ì™€ ê°™ì´ ê°„ë‹¨íˆ ì„ ì–¸í•´ Metadataë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

export  const  metadata:  Metadata  = {

title:  "ë¦¬ê·¸ ì˜¤ë¸Œ ë ˆì „ë“œ ì •ë³´ ì•±",

description:  "ë¡¤ ë°ì´í„°ë¥¼ ì œê³µí•´ì¤ë‹ˆë‹¤.",

};

### **ë™ì  Metadata ìƒì„±**

ë™ì ìœ¼ë¡œ Metadataë¥¼ ì„¤ì •í•˜ë ¤ë©´ generateMetadata í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.  
ì˜ˆë¥¼ ë“¤ì–´, ìƒì„¸ í˜ì´ì§€ì—ì„œ íŠ¹ì • ì±”í”¼ì–¸ì˜ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì œëª©ê³¼ ì„¤ëª…ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

#### **ì½”ë“œ ì˜ˆì œ**

```
export  async  function  generateMetadata({

params,

}: {

params: { id:  string };

}):  Promise<Metadata> {

const { id } =  params;

const  ChampionDetailData  =  await  fetchChampionDetailData(id);

  

return {

title:  `ì±”í”¼ì–¸ ì •ë³´ : ${ChampionDetailData.name}`,

description:  `${ChampionDetailData.name}ì˜ ë°ì´í„°ë¥¼ ì œê³µí•©ë‹ˆë‹¤.`,

};

}
```

### **ì„¤ëª…**

1.  **generateMetadata í•¨ìˆ˜**
    -   ë™ì  ë¼ìš°íŠ¸ì˜ paramsë¥¼ ì¸ìˆ˜ë¡œ ë°›ì•„ í•„ìš”í•œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
    -   ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ Metadata ê°ì²´ë¥¼ ìƒì„±í•´ ë°˜í™˜í•œë‹¤.
2.  **Metadata íƒ€ì…**
    -   Next.jsì—ì„œ ì œê³µí•˜ëŠ” íƒ€ì…ìœ¼ë¡œ, Metadata ê°ì²´ì˜ êµ¬ì¡°ë¥¼ ëª…í™•íˆ ì •ì˜í•  ìˆ˜ ìˆë‹¤.
    -   import { Metadata } from "next";ë¡œ ê°„ë‹¨íˆ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.

## **7. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •.**

### **ë¬¸ì œ ìƒí™©**

```
import { Rotation } from  "@/types/Rotation";

  

export  const  fetchRotData  =  async ():  Promise<{

freeChampionIds:  Rotation;

freeChampionIdsForNewPlayers:  Rotation;

}> => {

const  API_KEY  =  process.env.NEXT_PUBLIC_RIOT_API_KEY;

try {

const  res  =  await  fetch(

`[https://kr.api.riotgames.com/lol/platform/v3/champion-rotations?api_key=](https://kr.api.riotgames.com/lol/platform/v3/champion-rotations?api_key=)${API_KEY}`

);

const  data  =  await  res.json();

const { freeChampionIds, freeChampionIdsForNewPlayers } =  data;

return { freeChampionIds, freeChampionIdsForNewPlayers };

} catch (error) {

console.log(error);

throw  error;

}

};
```

í•´ë‹¹ ë¡œì§ì—ì„œ API_KEYë¥¼ ë°›ì•„ì˜¤ì§€ ëª» í•˜ê³  ê³„ì† undefinedë¡œ í‘œì‹œë˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆë‹¤.

### **ë¬¸ì œ ì›ì¸**

NEXT_PUBLIC_RIOT_API_KEY="API_KEY"

í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œ envë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¬ ë•ŒëŠ”, NEXT_PUBLIC_ì„ ì•ì— ë¶™ì–´ì£¼ì–´ì•¼ í•œë‹¤.

## **8. TanStack Queryì™€ íƒ€ì… ì§€ì •**

### **ë¬¸ì œ ìƒí™©**

ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œì—ì„œ, rotDataëŠ” APIë¡œë¶€í„° ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ì „ê¹Œì§€ëŠ” undefined ìƒíƒœë‹¤.  
ì´ë¡œ ì¸í•´, ë°ì´í„°ê°€ ì—†ëŠ” ë™ì•ˆ rotDataë¥¼ ì²˜ë¦¬í•˜ë ¤ê³  í•˜ë©´ íƒ€ì… ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.

```
rotData?.freeChampionIds.map((id) => {

return (

<div

className="border rounded p-4 hover:shadow-lg"

key={mappedData?.[id].id}

>
>
```
### **í•´ê²° ë°©ë²•: íƒ€ì… ì§€ì •**

rotDataì™€ mappedDataê°€ API í˜¸ì¶œ ì „ì—ëŠ” undefinedì¼ ìˆ˜ ìˆìŒì„ ëª…ì‹œì ìœ¼ë¡œ íƒ€ì…ì— í¬í•¨í•´ì•¼ í•œë‹¤.  
ì´ë¥¼ ìœ„í•´  **íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì˜ ìœ ë‹ˆì˜¨ íƒ€ì…**ì„ ì‚¬ìš©í•´ undefinedë¥¼ ì¶”ê°€í–ˆë‹¤.

```
type  RotationShowProps  = {

rotData:  rotData  |  undefined;

mappedData:  mappedData  |  undefined;

versionData:  string[] |  undefined;

};
```

#### **ì„¤ëª…**

-   **íŒŒì´í”„(|)**: undefinedë¥¼ íƒ€ì…ì— í¬í•¨ì‹œì¼œ ë°ì´í„°ê°€ ì•„ì§ ì—†ëŠ” ìƒíƒœë¥¼ ì²˜ë¦¬ ê°€ëŠ¥.
-   **ê²°ê³¼**: ë°ì´í„° ë¡œë”© ì¤‘ì—ë„ ì»´í¬ë„ŒíŠ¸ê°€ ì •ìƒì ìœ¼ë¡œ ë Œë”ë§ë˜ë©°, ì—ëŸ¬ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.

ì–´ì°¨í”¼ ì´ í˜ì´ì§€ëŠ” tanstackì„ ì‚¬ìš©í•´ì„œ ì œì‘ë˜ì—ˆê¸° ë•Œë¬¸ì—, fetchê°€ pending ìƒíƒœì¼ ê²½ìš° ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ë³´ì—¬ì£¼ê¸°ì— í¬ê²Œ ìƒê´€ì´ ì—†ë‹¤.

## **9. ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ì˜ ì ì ˆí•œ ì‚¬ìš©**

### **ë¬¸ì œ ìƒí™©**

í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ë³µì¡í•´ì§€ëŠ” ìƒí™©ì´ ë°œìƒí–ˆë‹¤.  
ë‹¤ìŒê³¼ ê°™ì€ ë¡œì§ë“¤ì´ ëª¨ë‘ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ì— í¬í•¨ë˜ì–´ ìˆì—ˆë‹¤:

1.  ì±”í”¼ì–¸ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ Map êµ¬ì¡°ë¡œ ë³€í™˜.
2.  Mapì„ ì‚¬ìš©í•´ ë¡œí…Œì´ì…˜ ì±”í”¼ì–¸ ì •ë³´ë¥¼ ì¡°íšŒ.
3.  ë°ì´í„°ë¥¼ í™”ë©´ì— ë Œë”ë§.

### **í•´ê²° ë°©ë²•: ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ ì‚¬ìš©**

ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ ë°ì´í„°ë¥¼ ê°€ê³µí•´  **ì •ì œëœ ë°ì´í„°**ë¥¼ ë°˜í™˜í•˜ë„ë¡ ë³€ê²½í–ˆë‹¤.  
ì´ë¥¼ í†µí•´ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ëŠ” ë°ì´í„° ë Œë”ë§ì—ë§Œ ì§‘ì¤‘í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.

#### **ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ ì½”ë“œ**
```
export  async  function  GET() {

const  versionData  =  await  getLatestVersion();

const  champData  =  await  fetchChampionData(versionData[0]);

const  rotData  =  await  fetchRotData();

const  mappedData  = (() => {

const  map  =  new  Map();

champData.forEach((champ) => {

map.set(Number(champ.key), {

id:  champ.id,

name:  champ.name,

title:  champ.title,

});

});

return  Object.fromEntries(map);

})();


  

return  NextResponse.json({ rotData, mappedData, versionData });
```

### **í•¸ë“¤ëŸ¬ë¥¼ ì‚¬ìš©í•œ ë°ì´í„° ê°€ê³µ**

ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ í™œìš©í•˜ë©´ ë°ì´í„°ë¥¼ ì„œë²„ ì¸¡ì—ì„œ ê°€ê³µí•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.  
ìœ„ ì½”ë“œì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ ì²˜ë¦¬í–ˆë‹¤:

1.  **ì±”í”¼ì–¸ ë°ì´í„° ê°€ê³µ**
    -   Mapì„ ìƒì„±í•´ ì±”í”¼ì–¸ ì •ë³´ë¥¼ ì •ë¦¬.
    -   Object.fromEntriesë¥¼ ì‚¬ìš©í•´ ê°ì²´ í˜•íƒœë¡œ ë³€í™˜.
2.  **ë¡œí…Œì´ì…˜ ì •ë³´ì™€ ê°€ê³µëœ ë°ì´í„°ë¥¼ í†µí•©**
    -   í•œ ë²ˆì˜ ìš”ì²­ìœ¼ë¡œ í•„ìš”í•œ ëª¨ë“  ë°ì´í„°ë¥¼ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬.

### **í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë°ì´í„° ì‚¬ìš©**

ì •ì œëœ ë°ì´í„°ë¥¼ ì‚¬ìš©í•´ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ê°„ë‹¨íˆ ë Œë”ë§ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.

#### **ì»´í¬ë„ŒíŠ¸ ì½”ë“œ**
```
const { data, isPending, isError, refetch } =  useQuery<{

rotData:  rotData;

mappedData:  mappedData;

versionData:  string[];

}>({

queryKey: ["champData"],

queryFn:  async () => {

const  res  =  await  fetch("api/rotation");

const  data  =  await  res.json();

return  data;

},

});
```
